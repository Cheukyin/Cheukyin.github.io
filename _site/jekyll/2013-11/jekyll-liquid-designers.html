
<!DOCTYPE html>
<html lang="zh">
  <head>
  <meta name="baidu-site-verification" content="AOdSVj7NpS" />
    <meta charset="UTF-8">
    <title>(转载)Jekyll 扩展的 Liquid 设计 - Cheukyin.blog</title>
    <meta name="description" content="在 Liquid 中有两种类型的标记： Output 和 Tag。">
    <meta name="keywords" content="liquid,jekyll">
    <meta name="author" content="Cheukyin">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link href="//cdn.bootcss.com/twitter-bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet" media="all">
    <link href="//cdn.bootcss.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" media="all">
    <link href="/assets/themes/havee/css/style.css?body=1" rel="stylesheet" media="all">
    <link href="/assets/themes/havee/css/pygments.css" rel="stylesheet" media="all">
    <link href="//libs.useso.com/js/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" media="all">

    <link rel="shortcut icon" href="/favicon.jpg">
    <link rel="canonical" href="http://cheukyin.github.io/jekyll/2013-11/jekyll-liquid-designers.html">
    <!-- fav and touch icons -->
    <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.png">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Cheukyin.blog ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Cheukyin.blog RSS Feed">

  </head>

  <body>
    <!--[if lte IE 9]>
    <div class="alert alert-warning">
      <p>Your Internet Explorer is not supported. Please upgrade your Internet Explorer to version 9+, or use latest <a href="http://www.google.com/chrome/" target="_blank" class="alert-link">Google chrome</a>、<a href="http://www.mozilla.org/firefox/" target="_blank" class="alert-link">Mozilla Firefox</a>.</p>
      <p>If you are using IE 9 or later, make sure you <a href="http://windows.microsoft.com/en-us/internet-explorer/use-compatibility-view#ie=ie-8" target="_blank" class="alert-link">turn off "Compatibility view"</a>.</p>
    </div>
    <![endif]-->

    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="/" title="Cheukyin.blog">Cheukyin.blog</a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse navbar-ex1-collapse">
        <ul class="nav navbar-nav">
          
          
          


  
    
  
    
  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/about.html">About</a></li>
      	
      
    
  
    
      
    
  
    
  




          <li>
          <form id="search-form" class="form-inline visible-lg" role="form">
            <input type="text" class="form-control input-sm" placeholder="Search" id="query">
          </form>
          </li>
        </ul>

        <ul class="nav navbar-nav navbar-right visible-lg visible-md">
          <li><a href="/rss.xml" target="_blank" title="RSS"><span class="fa fa-rss fa-lg"></span></a></li>
          
          <li><a href="https://github.com/cheukyin" target="_blank" title="Github"><span class="fa fa-github fa-lg"></span></a></li>
          
          
          
          
          
          <li><a href="http://weibo.com/u/2529066905" target="_blank" title="Weibo"><span class="fa fa-weibo fa-lg"></span></a></li>
          
        </ul>
      </div><!-- /.navbar-collapse -->
    </div>
    </nav>

    <div class="container">
      <div class="content">
        
<div class="row">

  <article class="col-md-9 main-contenter">
    <div id="search-loader" style="display:none;text-align:center">
      <img src="/assets/themes/havee/images/loading.gif">
    </div>
    <div class="page-header">
      <h2>
        (转载)Jekyll 扩展的 Liquid 设计
        
      </h2>
	  <div class="bottom">
		<span class="glyphicon glyphicon-user"></span><p>Cheukyin</p>
	    <span class="glyphicon glyphicon-calendar"></span><p>04 Nov 2013</p>
		<span class="glyphicon glyphicon-folder-open"></span> <a href="/categories.html#jekyll-ref" title="jekyll"><p>jekyll</p></a>
		<span class="glyphicon glyphicon-tags"></span> <a href="/tags.html#liquid-ref" title="liquid"><p>liquid</p></a><a href="/tags.html#jekyll-ref" title="jekyll"><p>jekyll</p></a>
      </div>
    </div>
    <div class="wrapper"><blockquote>
<p>原文地址：<a href="http://havee.me/internet/2013-10/add-fancybox-on-jekyll.html">https://github.com/shopify/liquid/wiki/liquid-for-designers</a></p>
</blockquote>

<p>在Liquid中有两种类型的标记： <code>Output</code> 和 <code>Tag</code>。</p>

<ul>
<li><p><code>Output</code> 标记（有些可能解析文本）被包含在：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{{ 两个配对的花括号中 }}
</code></pre></div></li>
<li><p><code>Tag</code> 标记（不能解析文本）被包含在:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{% 成对的花括号和百分号中 %}
</code></pre></div></li>
</ul>

<!-- more -->

<h3>Output</h3>

<p>下面是关于输出标记的简单实例：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">Hello {{name}}
Hello {{user.name}}
Hello {{ &#39;tobi&#39; }}
</code></pre></div>
<h4>高级输入：过滤器</h4>

<p>输入标记带有过滤器，方法很简单。第一个参数总是过滤器左边值的输出。当下个过滤器运行时，刚刚所得到的过滤器返回值就会成为新的左边值。直到最后没有过滤器时，模板就会接受最后的结果字符串。</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">Hello {{ &#39;tobi&#39; | upcase }}
Hello tobi has {{ &#39;tobi&#39; | size }} letters!
Hello {{ &#39;tobi&#39; | capitalize }}
Hello {{ &#39;1984-02-01&#39; | date: &quot;%Y&quot; }}
</code></pre></div>
<p>输出结果是：</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">Hello {{ &#39;tobi&#39; | upcase }}
Hello tobi has {{ &#39;tobi&#39; | size }} letters!
Hello {{ &#39;tobi&#39; | capitalize }}
Hello {{ &#39;1984-02-01&#39; | date: &quot;%Y&quot; }}
</code></pre></div>
<h4>标准过滤器</h4>

<ul>
<li><code>date</code> - 格式化日期 <a href="http://liquid.rubyforge.org/classes/Liquid/StandardFilters.html#M000012">语法参考</a></li>
<li><code>capitalize</code> - 将输入语句的首字母大写</li>
<li><code>downcase</code> - 将输入字符串转为小写</li>
<li><code>upcase</code> - 将输入字符串转为大写</li>
<li><code>first</code> - 得到传递数组的第一个元素</li>
<li><code>last</code> - 得到传递数组的最后一个元素</li>
<li><code>join</code> - 将数组中的元素连成一串，中间通过某些字符分隔</li>
<li><code>sort</code> - 对数组元素进行排序</li>
<li><code>map</code> - 从一个给定属性中映射/收集一个数组</li>
<li><code>size</code> - 返回一个数组或字符串的大小</li>
<li><code>escape</code> - 对一串字符串进行编码</li>
<li><code>escape_once</code> - 返回一个转义的html版本，而不影响现有的转义文本</li>
<li><code>strip_html</code> - 去除一串字符串中的所有html标签</li>
<li><code>strip_newlines</code> - 从字符串中去除所有换行符(\n) </li>
<li><code>newline_to_br</code> - 将所有的换行符(\n)换成html的换行标记</li>
<li><code>replace</code> - 匹配每一处指定字符串，如 {{ &#39;foofoo&#39; | replace:&#39;foo&#39;,&#39;bar&#39; }} #=&gt; &#39;barbar&#39;</li>
<li><code>replace_first</code> - 匹配第一处指定的字符串，如 {{ &#39;barbar&#39; | replace_first:&#39;bar&#39;,&#39;foo&#39; }} #=&gt; &#39;foobar&#39;</li>
<li><code>remove</code> - 删除每一处匹配字符串，如 {{ &#39;foobarfoobar&#39; | remove:&#39;foo&#39; }} #=&gt; &#39;barbar&#39;</li>
<li><code>remove_first</code> - 删除第一处匹配的字符串，如 {{ &#39;barbar&#39; | remove_first:&#39;bar&#39; }} #=&gt; &#39;bar&#39;</li>
<li><code>truncate</code> - 将一串字符串截断为x个字符</li>
<li><code>truncatewords</code> - 将一串字符串截断为x个单词</li>
<li><code>prepend</code> - 在一串字符串前面加上指定字符串，如 {{ &#39;bar&#39; | prepend:&#39;foo&#39; }} #=&gt; &#39;foobar&#39;</li>
<li><code>append</code> - 在一串字符串后面加上指定字符串，如 {{ &#39;foo&#39; | append:&#39;bar&#39; }} #=&gt; &#39;foobar&#39;</li>
<li><code>minus</code> - 减，如 {{ 4 | minus:2 }} #=&gt; 2</li>
<li><code>plus</code> - 加，如 {{ &#39;1&#39; | plus:&#39;1&#39; }} #=&gt; &#39;11&#39;, {{ 1 | plus:1 }} #=&gt; 2</li>
<li><code>times</code> - 乘，如 {{ 5 | times:4 }} #=&gt; 20</li>
<li><code>divided_by</code> - 除，如 {{ 10 | divided_by:2 }} #=&gt; 5</li>
<li><code>split</code> - 将一串字符串根据匹配模式分割成数组，如 {{ &quot;a~b&quot; | split:~ }} #=&gt; [&#39;a&#39;,&#39;b&#39;]</li>
<li><code>modulo</code> - 余数，如 {{ 3 | modulo:2 }} #=&gt; 1</li>
</ul>

<h3>Tags</h3>

<p><code>Tags</code> 用于你的模板逻辑。新的标签很容易开发，因此我希望在发布这些代码后，大家可以为标准标签库增加更多的内容。</p>

<p>下列是当前已经支持的标签：</p>

<ul>
<li><strong>assign</strong> - 将一些值赋给一个变量</li>
<li><strong>capture</strong> - 块标记，把一些文本捕捉到一个变量中</li>
<li><strong>case</strong> - 块标记，标准的 case 语句</li>
<li><strong>comment</strong> - 块标记，将一块文本作为注释</li>
<li><strong>cycle</strong> - Cycle 通常用于循环轮换值，如颜色或 DOM 类。</li>
<li><strong>for</strong> - 用于循环 For loop</li>
<li><strong>if</strong> - 标准的 if/else 块</li>
<li><strong>include</strong> - 包含其他的模板；对于区块化非常有效</li>
<li><strong>raw</strong> - 暂时性的禁用的标签的解析</li>
<li><strong>unless</strong> - if 语句的简版</li>
</ul>

<h4>注释</h4>

<p>注释是最简单的标签，它只是把内容包含起来。</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">We made 1 million dollars {% comment %} in losses {% endcomment %} this year
</code></pre></div>
<h4>Raw</h4>

<p>Raw 暂时性的禁用的标签的解析。这在需要展示一些可能产生冲突的内容（如本页面，要展示 liquid 语句，就需要包含在 raw 标签间，否则会被解析）时非常有用。</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">{% raw %}
In Handlebars, {{ this }} will be HTML-escaped, but {{{ that }}} will not.
{% endraw %}
</code></pre></div>
<h4>If/Else</h4>

<p><code>if/else</code> 在其他编程语言里应该已经被熟知了。Liquid 使得你可以通过 <code>if</code> 或 <code>unless</code> ( <code>elsif</code> 和 <code>else</code> 为可选 ) 编写简单的表达式:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">user</span> <span class="sx">%}</span>
<span class="sx">    Hello {{ user.name }</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="sx">%}</span>

<span class="sx">{% if user.name == &#39;tobi&#39; %}</span>
    <span class="no">Hello</span> <span class="n">tobi</span>
<span class="p">{</span><span class="o">%</span> <span class="k">elsif</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;bob&#39;</span> <span class="sx">%}</span>
<span class="sx">    Hello bob</span>
<span class="sx">{% endif %}</span>

<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;tobi&#39;</span> <span class="ow">or</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;bob&#39;</span> <span class="sx">%}</span>
<span class="sx">    Hello tobi or bob</span>
<span class="sx">{% endif %}</span>

<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;bob&#39;</span> <span class="ow">and</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="mi">45</span> <span class="sx">%}</span>
<span class="sx">    Hello old bob</span>
<span class="sx">{% endif %}</span>

<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">!=</span> <span class="s1">&#39;tobi&#39;</span> <span class="sx">%}</span>
<span class="sx">    Hello non-tobi</span>
<span class="sx">{% endif %}</span>

<span class="c1"># 同上</span>
<span class="p">{</span><span class="o">%</span> <span class="k">unless</span> <span class="n">user</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">&#39;tobi&#39;</span> <span class="sx">%}</span>
<span class="sx">    Hello non-tobi</span>
<span class="sx">{% endunless %}</span>

<span class="c1"># 检测是否用户有一张信用卡</span>
<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">creditcard</span> <span class="o">!=</span> <span class="n">null</span> <span class="sx">%}</span>
<span class="sx">   poor sob</span>
<span class="sx">{% endif %}</span>

<span class="c1"># 同上</span>
<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">creditcard</span> <span class="sx">%}</span>
<span class="sx">   poor sob</span>
<span class="sx">{% endif %}</span>

<span class="c1"># Check for an empty array</span>
<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">payments</span> <span class="o">==</span> <span class="n">empty</span> <span class="sx">%}</span>
<span class="sx">   you never paid !</span>
<span class="sx">{% endif %}</span>

<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">user</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;</span> <span class="mi">18</span> <span class="sx">%}</span>
<span class="sx">   Login here</span>
<span class="sx">{% else %}</span>
   <span class="no">Sorry</span><span class="p">,</span> <span class="n">you</span> <span class="n">are</span> <span class="n">too</span> <span class="n">young</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="sx">%}</span>

<span class="sx"># array = 1,2,3</span>
<span class="sx">{% if array contains 2 %}</span>
   <span class="n">array</span> <span class="n">includes</span> <span class="mi">2</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="sx">%}</span>

<span class="sx"># string = &#39;hello world&#39;</span>
<span class="sx">{% if string contains &#39;hello&#39; %}</span>
   <span class="n">string</span> <span class="n">includes</span> <span class="s1">&#39;hello&#39;</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
<h4>Case语句</h4>

<p>如果你需要更多的条件判断，你可以使用 <code>case</code> 语句:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="k">case</span> <span class="n">condition</span> <span class="sx">%}</span>
<span class="sx">    {% when 1 %}</span>
        <span class="n">hit</span> <span class="mi">1</span>
    <span class="p">{</span><span class="o">%</span> <span class="k">when</span> <span class="mi">2</span> <span class="ow">or</span> <span class="mi">3</span> <span class="sx">%}</span>
<span class="sx">        hit 2 or 3</span>
<span class="sx">    {% else %}</span>
        <span class="o">.</span><span class="n">.</span><span class="o">.</span> <span class="k">else</span> <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endcase</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
<p>Example:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="k">case</span> <span class="n">template</span> <span class="sx">%}</span>
<span class="sx">    {% when &#39;label&#39; %}</span>
        <span class="sr">//</span> <span class="p">{{</span> <span class="n">label</span><span class="o">.</span><span class="n">title</span> <span class="p">}}</span>
    <span class="p">{</span><span class="o">%</span> <span class="k">when</span> <span class="s1">&#39;product&#39;</span> <span class="sx">%}</span>
<span class="sx">        // {{ product.vendor | link_to_vendor }</span><span class="p">}</span> <span class="o">/</span> <span class="p">{{</span> <span class="n">product</span><span class="o">.</span><span class="n">title</span> <span class="p">}}</span>
    <span class="p">{</span><span class="o">%</span> <span class="k">else</span> <span class="sx">%}</span>
<span class="sx">        // {{page_title}</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endcase</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
<h4>Cycle</h4>

<p>我们常常需要在不同的颜色或类似的任务间轮流切换。Liquid 对于这样的操作有内置支持，通过使用 <code>cicle</code> 标签。</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="n">cycle</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span> <span class="sx">%}</span>
<span class="sx">{% cycle &#39;one&#39;, &#39;two&#39;, &#39;three&#39; %}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">cycle</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span> <span class="sx">%}</span>
<span class="sx">{% cycle &#39;one&#39;, &#39;two&#39;, &#39;three&#39; %}</span>

<span class="n">will</span> <span class="n">result</span> <span class="k">in</span>

<span class="n">one</span>
<span class="n">two</span>
<span class="n">three</span>
<span class="n">one</span>
</code></pre></div>
<p>如果一组 <code>cycle</code> 没有命名，那默认情况下有用相同参数的会被认为是一个组。</p>

<p>如果你希望完全控制 <code>cycle</code> 组，你可以指定一个组名，这个组名甚至可以是一个变量。</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="n">cycle</span> <span class="s1">&#39;group 1&#39;</span><span class="p">:</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span> <span class="sx">%}</span>
<span class="sx">{% cycle &#39;group 1&#39;: &#39;one&#39;, &#39;two&#39;, &#39;three&#39; %}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">cycle</span> <span class="s1">&#39;group 2&#39;</span><span class="p">:</span> <span class="s1">&#39;one&#39;</span><span class="p">,</span> <span class="s1">&#39;two&#39;</span><span class="p">,</span> <span class="s1">&#39;three&#39;</span> <span class="sx">%}</span>
<span class="sx">{% cycle &#39;group 2&#39;: &#39;one&#39;, &#39;two&#39;, &#39;three&#39; %}</span>

<span class="n">will</span> <span class="n">result</span> <span class="k">in</span>

<span class="n">one</span>
<span class="n">two</span>
<span class="n">one</span>
<span class="n">two</span>
</code></pre></div>
<h4>循环</h4>

<p>Liquid 允许循环一个集合 :</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="n">array</span> <span class="sx">%}</span>
<span class="sx">    {{ item }</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
<p>在每次循环期间，下列的帮助变量都可用于额外的展示需要:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text">forloop.length      # =&gt; length of the entire for loop
forloop.index       # =&gt; index of the current iteration
forloop.index0      # =&gt; index of the current iteration (zero based)
forloop.rindex      # =&gt; how many items are still left?
forloop.rindex0     # =&gt; how many items are still left? (zero based)
forloop.first       # =&gt; is this the first iteration?
forloop.last        # =&gt; is this the last iteration?
</code></pre></div>
<p>你可以使用一些属性来影响接受循环中的哪项。</p>

<p><code>limit:int</code> 使你可以限制接受的循环项个数；<code>offset:int</code> 可以可以让你从循环集合的第 n 项开始.</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># array = \[1,2,3,4,5,6\]</span>
<span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="n">array</span> <span class="ss">limit</span><span class="p">:</span><span class="mi">2</span> <span class="ss">offset</span><span class="p">:</span><span class="mi">2</span> <span class="sx">%}</span>
<span class="sx">    {{ item }</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
<span class="c1"># results in 3,4</span>
</code></pre></div>
<p>反转循环</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">item</span> <span class="k">in</span> <span class="n">collection</span> <span class="n">reversed</span> <span class="sx">%}</span>
<span class="sx">    {{item}</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
<p>除了对一个已经存在的集合进行循环，你还可以定义一段范围区域内的数字进行循环。这段区域既可以通过文字也可以通过变量数定义得到:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># if item.quantity is 4...</span>
<span class="p">{</span><span class="o">%</span> <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.item</span><span class="o">.</span><span class="n">quantity</span><span class="p">)</span> <span class="sx">%}</span>
<span class="sx">    {{ i }</span><span class="p">}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
<span class="c1"># results in 1,2,3,4</span>
</code></pre></div>
<h4>Variable Assignment</h4>

<p>你可以把数据存储在你自己定义的变量中，以便在输出或者其他标签中使用。创建一个变量的最简单方式是使用 assign 标签，其语法也是简单明了的：</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="n">assign</span> <span class="nb">name</span> <span class="o">=</span> <span class="s1">&#39;freestyle&#39;</span> <span class="sx">%}</span>

<span class="sx">{% for t in collections.tags %}</span>
    <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="nb">name</span> <span class="sx">%}</span>
<span class="sx">        &lt;p&gt;Freestyle!&lt;/p&gt;</span>
<span class="sx">    {% endif %}</span>
<span class="p">{</span><span class="o">%</span> <span class="n">endfor</span> <span class="o">%</span><span class="p">}</span>
</code></pre></div>
<p>另一种常见用法是把 <code>true/false</code> 值赋给变量:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="p">{</span><span class="o">%</span> <span class="n">assign</span> <span class="n">freestyle</span> <span class="o">=</span> <span class="kp">false</span> <span class="sx">%}</span>

<span class="sx">{% for t in collections.tags %}</span>
    <span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">t</span> <span class="o">==</span> <span class="s1">&#39;freestyle&#39;</span> <span class="sx">%}</span>
<span class="sx">        {% assign freestyle = true %}</span>
    <span class="p">{</span><span class="o">%</span> <span class="n">endif</span> <span class="sx">%}</span>
<span class="sx">{% endfor %}</span>

<span class="p">{</span><span class="o">%</span> <span class="k">if</span> <span class="n">freestyle</span> <span class="sx">%}</span>
<span class="sx">    &lt;p&gt;Freestyle!&lt;/p&gt;</span>
<span class="sx">{% endif %}</span>
</code></pre></div>
<p>如果你希望把一系列字符串连接为一个字符串，并将其存储到变量中，你可以使用 <code>capture</code> 标签。这个标签是一个块级标签，它会 <code>captures</code> 任何在其中渲染的元素，并把捕获的值赋给给定的变量，而不是把这些值渲染在页面中。</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html">{% capture attribute_name %}{{ item.title | handleize }}-{{ i }}-color{% endcapture %}

<span class="nt">&lt;label</span> <span class="na">for=</span><span class="s">&quot;{{ attribute_name }}&quot;</span><span class="nt">&gt;</span>Color:<span class="nt">&lt;/label&gt;</span>
<span class="nt">&lt;select</span> <span class="na">name=</span><span class="s">&quot;attributes[{{ attribute_name }}]&quot;</span> <span class="na">id=</span><span class="s">&quot;{{ attribute_name }}&quot;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;red&quot;</span><span class="nt">&gt;</span>Red<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;green&quot;</span><span class="nt">&gt;</span>Green<span class="nt">&lt;/option&gt;</span>
  <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;blue&quot;</span><span class="nt">&gt;</span>Blue<span class="nt">&lt;/option&gt;</span>
<span class="nt">&lt;/select&gt;</span>
</code></pre></div>
<p>转自：http://yanshasha.com/2013/01/22/Liquid-for-Designers/</p>
</div>
    <!-- <div class="cc">
    <a target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">
    <img title="署名-非商业性使用-相同方式共享 4.0 国际" src="/assets/images/CC.png" alt="License"></img>
    </a>
    </div> -->
    <div class="row status">
      <div class="col-md-6">
        <div class="btn-group">
          
          <a class="btn btn-primary btn-sm" href="/jekyll/2013-10/add-fancybox-on-jekyll.html" title="(转载)给 Jekyll 添加 FancyBox">&laquo; Prev</a>
          
          <a class="btn btn-primary btn-sm" href="/archive.html">Archive</a>
          
          <a class="btn btn-primary btn-sm" href="/jekyll/emacs/2014-08/org2jekyll.html" title="用Org-Mode和Jekll写博客">Next &raquo;</a>
          
        </div>
      </div>
      <div class="col-md-6 visible-lg visible-md">
      
<div class="bdsharebuttonbox pull-right">
  <a title="分享到新浪微博" href="#" class="bds_tsina" data-cmd="tsina"></a>
  <a title="分享到腾讯微博" href="#" class="bds_tqq" data-cmd="tqq"></a>
  <a title="分享到网易微博" href="#" class="bds_t163" data-cmd="t163"></a>
  <a title="分享到QQ空间" href="#" class="bds_qzone" data-cmd="qzone"></a>
  <a title="分享到微信" href="#" class="bds_weixin" data-cmd="weixin"></a>
  <a href="#" class="bds_more" data-cmd="more"></a>
</div>


      </div>
    </div>
    

  </article>


          <aside class="col-md-3 visible-lg visible-md">
                        <section>
        <h4>Categories</h4>
        <div class="tag_box">
          <ul>
          
          


  
     
    	<li><a href="/categories.html#git-ref">
    		git <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#linux-ref">
    		linux <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#jekyll-ref">
    		jekyll <span>6</span>
    	</a></li>
     
    	<li><a href="/categories.html#emacs-ref">
    		emacs <span>1</span>
    	</a></li>
     
    	<li><a href="/categories.html#python-ref">
    		python <span>2</span>
    	</a></li>
    
  

 
          </ul>
        </div>
      </section>


            <section>
        <h4>Recently Posts</h4>
        <ul>
        
          <li><a href="/python/2014-08/pygments-highlight-src-export-html.html">用Python高亮org-mode代码块</a></li>
        
          <li><a href="/jekyll/python/2014-08/ping-service.html">Blog发送ping服务请求的Python实现</a></li>
        
          <li><a href="/jekyll/emacs/2014-08/org2jekyll.html">用Org-Mode和Jekll写博客</a></li>
        
          <li><a href="/jekyll/2013-11/jekyll-liquid-designers.html">(转载)Jekyll 扩展的 Liquid 设计</a></li>
        
          <li><a href="/jekyll/2013-10/add-fancybox-on-jekyll.html">(转载)给 Jekyll 添加 FancyBox</a></li>
        
          <li><a href="/jekyll/2013-08/convert-scss-to-css.html">(转载)CSS 的预处理器 SASS</a></li>
        
          <li><a href="/jekyll/2013-07/markdown-syntax.html">Markdown 语法说明</a></li>
        
          <li><a href="/linux/2013-02/archlinux-installation.html">Archlinux折腾记</a></li>
        
          <li><a href="/git/2012-07/the-git-advanced-subtree.html">(转载)Git 进阶：Subtree</a></li>
        
        </ul>
      </section>


            


            


            
      <section>
        <h4>Blogroll</h4>
        <ul>
          
          <li><a href="//lingyu.wang/" title="天镶·Blog">天镶·Blog</a></li>
          
          <li><a href="//www.matrix67.com/blog" title="Matrix67·Blog">Matrix67·Blog</a></li>
          
          <li><a href="//coolshell.cn/" title="CoolShell·Blog">CoolShell·Blog</a></li>
          
        </ul>
      </section>
      


          </aside>

</div>


      </div>

      <footer class="text-left">
      <p>&copy; 2014 <a href="/" target="_blank">Cheukyin</a>. with Help from <a href="http://jekyllbootstrap.com/" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a> and <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a></p>
      </footer>
    </div> <!-- /container -->

    <script src="//libs.useso.com/js/jquery/2.1.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/havee/js/jquery.min.js"><\/script>')</script>
    <script src="//libs.useso.com/js/bootstrap/3.1.1/js/bootstrap.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/havee/js/bootstrap.min.js"><\/script>')</script>
    <script src="//libs.useso.com/js/fancybox/2.1.5/jquery.fancybox.min.js"></script>
    <script>window.jQuery || document.write('<script src="/assets/themes/havee/js/jquery.fancybox.min.js"><\/script>')</script>
    <script src="/assets/themes/havee/js/webcore.js"></script>
    

    


  <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'cheukyin-github'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             var disqus_identifier = '/jekyll/2013-11/jekyll-liquid-designers';
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>





    <script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F5a52b5b1384d933082f44b999fae192a' type='text/javascript'%3E%3C/script%3E"));
</script>

    

    


  
<!-- Baidu Button BEGIN -->
<script>window._bd_share_config={"common":{"bdSnsKey":{"tsina":"722958853","tqq":"801412850","t163":"CqC03sHkQ0Yoajki"},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
<!-- Baidu Button END -->






  </body>
</html>

